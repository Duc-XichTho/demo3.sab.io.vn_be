export const thongBaoCongNo = (data) =>
    /*html*/`
    <!DOCTYPE html>
        <html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" lang="en">
            <head>
                <title></title>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0"><!--[if mso]><xml><o:OfficeDocumentSettings><o:PixelsPerInch>96</o:PixelsPerInch><o:AllowPNG /></o:OfficeDocumentSettings></xml><![endif]--><!--[if !mso]><!-->
                        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"><!--<![endif]-->
                            <style>
                                * {
                                    box - sizing: border-box;
		                        }

                                body {
                                    margin: 0;
                                padding: 0;
		                        }

                                a[x-apple-data-detectors] {
                                    color: inherit !important;
                                    text-decoration: inherit !important;
                                }

                                #MessageViewBody a {
                                    color: inherit;
                                    text-decoration: none;
		                        }

                                p {
                                    line - height: inherit
		                        }

                                .desktop_hide,
                                .desktop_hide table {
                                    mso - hide: all;
                                    display: none;
                                    max-height: 0px;
                                    overflow: hidden;
                                }

                                .image_block img+div {
                                    display: none;
		                        }

                                sup,
                                sub {
                                    font - size: 75%;
                                    line-height: 0;
                                }

                                @media (max-width:650px) {
                                    .desktop_hide table.icons-inner {
                                        display: inline-block !important;
                                    }

                                    .icons-inner {
                                        text - align: center;
                                    }       

                                    .icons-inner td {
                                        margin: 0 auto;
                                    }

                                    .mobile_hide {
                                        display: none;
                                    }

                                    .row-content {
                                        width: 100% !important;
                                    }

                                    .stack .column {
                                        width: 100%;
                                        display: block;
                                    }

                                    .mobile_hide {
                                        min - height: 0;
                                        max-height: 0;
                                        max-width: 0;
                                        overflow: hidden;
                                        font-size: 0px;
                                    }

                                    .desktop_hide,
                                    .desktop_hide table {
                                        display: table !important;
                                        max-height: none !important;
                                    }
                                }
                            </style><!--[if mso ]><style>sup, sub {font - size: 100% !important; } sup {mso - text - raise:10% } sub {mso - text - raise:-10% }</style> <![endif]-->
                        </head>
                        <body class="body" style="background-color: #F5F5F5; margin: 0; padding: 0; -webkit-text-size-adjust: none; text-size-adjust: none;">
                            <table class="nl-container" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #F5F5F5;">
                                <tbody>
                                    <tr>
                                        <td>
                                            <table class="row row-1" align="center" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <table class="row-content stack" align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 630px; margin: 0 auto;" width="630">
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="column column-1" width="100%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 5px; padding-top: 5px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;">
                                                                            <div class="spacer_block block-1" style="height:30px;line-height:30px;font-size:1px;">&#8202;</div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <table class="row row-2" align="center" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <table class="row-content" align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #FFFFFF; color: #333; width: 630px; margin: 0 auto;" width="630">
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="column column-1" width="50%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 25px; padding-left: 25px; padding-top: 25px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;">
                                                                            <table class="image_block block-1" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                                                <tr>
                                                                                    <td class="pad" style="width:100%;">
                                                                                        <div class="alignment" align="left" style="line-height:10px">
                                                                                            <div style="max-width: 120px;"><img src="	https://sab.xichtho.vn/App.png" style="display: block; height: auto; border: 0; width: 100%;" width="120" alt title height="auto"></div>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                        <td class="column column-2" width="50%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 25px; padding-right: 25px; padding-top: 25px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;">
                                                                            <table class="button_block block-1" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                                                <tr>
                                                                                    <td class="pad" style="padding-bottom:10px;padding-left:10px;padding-top:10px;text-align:right;">
                                                                                        <div class="alignment" align="right"><!--[if mso]>
                                                                                            <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="#" style="height:38px;width:105px;v-text-anchor:middle;" arcsize="37%" stroke="false" fillcolor="#e3edfe">
                                                                                                <w:anchorlock />
                                                                                                <v:textbox inset="0px,0px,0px,0px">
                                                                                                    <center dir="false" style="color:#052d3d;font-family:Tahoma, Verdana, sans-serif;font-size:14px">
                                                                                                        <![endif]--><a class="button" href="#" target="_blank" style="background-color:#e3edfe;border-bottom:0px solid transparent;border-left:0px solid transparent;border-radius:14px;border-right:0px solid transparent;border-top:0px solid transparent;color:#052d3d;display:inline-block;font-family:'Lato', Tahoma, Verdana, Segoe, sans-serif;font-size:14px;font-weight:undefined;mso-border-alt:none;padding-bottom:5px;padding-top:5px;text-align:center;text-decoration:none;width:auto;word-break:keep-all;"><span style="word-break: break-word; padding-left: 20px; padding-right: 20px; font-size: 14px; display: inline-block; letter-spacing: normal;"><span style="word-break: break-word;"><span style="word-break: break-word; line-height: 28px;" data-mce-style>${data.name}</span></span></span></a><!--[if mso]></center></v:textbox></v:roundrect><![endif]--></div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <table class="row row-3" align="center" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <table class="row-content stack" align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #D6E7F0; color: #000000; width: 630px; margin: 0 auto;" width="630">
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="column column-1" width="100%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 60px; padding-left: 25px; padding-right: 25px; padding-top: 5px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;">
                                                                            <table class="paragraph_block block-1" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;">
                                                                                <tr>
                                                                                    <td class="pad" style="padding-left:15px;padding-right:10px;padding-top:20px;">
                                                                                        <div style="color:#052d3d;font-family:'Lato', Tahoma, Verdana, Segoe, sans-serif;font-size:38px;line-height:150%;text-align:center;mso-line-height-alt:57px;">
                                                                                            <p style="margin: 0; word-break: break-word;"><span style="word-break: break-word;"><strong><span style="word-break: break-word;"><span style="word-break: break-word;">THÔNG BÁO</span></span></strong></span></p>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                            <table class="paragraph_block block-2" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;">
                                                                                <tr>
                                                                                    <td class="pad">
                                                                                        <div style="color:#555555;font-family:'Lato', Tahoma, Verdana, Segoe, sans-serif;font-size:18px;line-height:120%;text-align:center;mso-line-height-alt:21.599999999999998px;">
                                                                                            <p style="margin: 0; word-break: break-word;"><span style="word-break: break-word; color: #000000;">${data.title}</span></p>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                            <table class="table_block block-3" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                                                <tr>
                                                                                    <td class="pad">
                                                                                        <table style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 100%; table-layout: fixed; direction: ltr; background-color: transparent; font-family: 'Lato', Tahoma, Verdana, Segoe, sans-serif; font-weight: 400; color: #101112; text-align: left; letter-spacing: 0px;" width="100%">
                                                                                            <thead style="vertical-align: top; background-color: #f2f2f2; color: #101112; font-size: 14px; line-height: 120%;">
                                                                                                <tr>
                                                                                                    <th width="50%" style="padding: 10px; word-break: break-word; font-weight: 700; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0; text-align: center;">Thông tin</th>
                                                                                                    <th width="50%" style="padding: 10px; word-break: break-word; font-weight: 700; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0; text-align: center;">Giá trị</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody style="vertical-align: top; font-size: 16px; line-height: 120%;">
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Loại</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.type}</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Đối tác</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.name}</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Mã số thuế</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.mst}</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Hóa đơn số</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.so_hoa_don}</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Ngày suất hóa đơn</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.date}</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Thời hạn thanh toán</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.term}</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Ngày đáo hạn</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.ngay_den_han}</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">Số tiền sau thuế</td>
                                                                                                    <td width="50%" style="padding: 10px; word-break: break-word; border-top: 1px solid #a0a0a0; border-right: 1px solid #a0a0a0; border-bottom: 1px solid #a0a0a0; border-left: 1px solid #a0a0a0;">${data.total}</td>
                                                                                                </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <table class="row row-4" align="center" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <table class="row-content stack" align="center" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #FFFFFF; border-radius: 0; color: #000000; width: 630px; margin: 0 auto;" width="630">
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="column column-1" width="33.333333333333336%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 5px; padding-top: 5px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;">
                                                                            <table class="empty_block block-1" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                                                <tr>
                                                                                    <td class="pad">
                                                                                        <div></div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                        <td class="column column-2" width="33.333333333333336%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 5px; padding-top: 5px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;">
                                                                            <table class="button_block block-1" width="100%" border="0" cellpadding="10" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                                                <tr>
                                                                                    <td class="pad">
                                                                                        <div class="alignment" align="center"><!--[if mso]>
                                                                                            <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="http://localhost:5173/home/hoa-don/bang-ke-hoa-don" style="height:42px;width:109px;v-text-anchor:middle;" arcsize="10%" stroke="false" fillcolor="#fb7228">
                                                                                                <w:anchorlock />
                                                                                                <v:textbox inset="0px,0px,0px,0px">
                                                                                                    <center dir="false" style="color:#ffffff;font-family:Tahoma, Verdana, sans-serif;font-size:16px">
                                                                                                        <![endif]--><a class="button" href="${data.link}" target="_blank" style="background-color:#fb7228;border-bottom:0px solid transparent;border-left:0px solid transparent;border-radius:4px;border-right:0px solid transparent;border-top:0px solid transparent;color:#ffffff;display:inline-block;font-family:'Lato', Tahoma, Verdana, Segoe, sans-serif;font-size:16px;font-weight:400;mso-border-alt:none;padding-bottom:5px;padding-top:5px;text-align:center;text-decoration:none;width:auto;word-break:keep-all;"><span style="word-break: break-word; padding-left: 20px; padding-right: 20px; font-size: 16px; display: inline-block; letter-spacing: normal;"><span style="word-break: break-word; line-height: 32px;">Chi tiết</span></span></a><!--[if mso]></center></v:textbox></v:roundrect><![endif]--></div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                        <td class="column column-3" width="33.333333333333336%" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-bottom: 5px; padding-top: 5px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;">
                                                                            <table class="empty_block block-1" width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;">
                                                                                <tr>
                                                                                    <td class="pad">
                                                                                        <div></div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table><!-- End -->
                        </body>

                    </html>`;

export const thongBaoTinNhan = (data) => {
    const { userNoti, content, ticket_id, user_email, companyName, ticketUrl } = data;

    return /*html*/`
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <title>Thông báo mới</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px;">
        <div style="max-width: 600px; margin: 0 auto; background-color: #f9f9f9; padding: 20px;">
            <h2 style="color: #333; margin-bottom: 20px;">Thông báo mới${companyName ? ` từ ${companyName}` : ''}</h2>
            
            <div style="background-color: #fff; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                <p style="margin: 0 0 10px 0;">${content}</p>
                
                ${ticket_id ? `<p style="margin: 0 0 10px 0; color: #666;">Ticket ID: ${ticket_id}</p>` : ''}
                ${user_email ? `<p style="margin: 0 0 10px 0; color: #666;">Từ: ${user_email}</p>` : ''}
                ${userNoti ? `<p style="margin: 0; color: #666;">Người nhận: ${userNoti}</p>` : ''}
                
                ${ticketUrl ? `
                <div style="margin: 20px 0; text-align: center;">
                    <a href="${ticketUrl}" 
                       style="background-color: #fb7228; 
                              color: white; 
                              padding: 10px 20px; 
                              text-decoration: none; 
                              border-radius: 5px; 
                              display: inline-block;
                              font-weight: bold;">
                        Xem chi tiết ticket
                    </a>
                </div>
                ` : ''}
            </div>
            
            <p style="color: #999; font-size: 12px; margin-top: 20px;">Email này được gửi tự động, vui lòng không trả lời.</p>
        </div>
    </body>
    </html>`;
};

export const ticketStatusChange = (data) => {
    const {
        ticket_id,
        oldStatus,
        newStatus,
        ticketTitle,
        ticketUrl,
        changedBy,
        companyName,
        changeDate,
        remarks
    } = data;

    // Define status colors
    const statusColors = {
        'new': '#3498db',       // Blue
        'open': '#2ecc71',      // Green
        'pending': '#f39c12',   // Orange
        'in-progress': '#9b59b6', // Purple
        'resolved': '#27ae60',  // Dark Green
        'closed': '#7f8c8d',    // Gray
        'cancelled': '#e74c3c'  // Red
    };

    // Default color if status not in predefined list
    const oldStatusColor = statusColors[oldStatus?.toLowerCase()] || '#95a5a6';
    const newStatusColor = statusColors[newStatus?.toLowerCase()] || '#95a5a6';

    // Format date or use current date
    const formattedDate = changeDate ? new Date(changeDate).toLocaleString('vi-VN') : new Date().toLocaleString('vi-VN');

    return /*html*/`
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <title>Cập nhật trạng thái ticket</title>
    </head>
    <body style="font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px;">
        <div style="max-width: 600px; margin: 0 auto; background-color: #f9f9f9; padding: 20px; border-radius: 5px;">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #333; margin-bottom: 5px;">Cập nhật trạng thái ticket</h2>
                ${companyName ? `<p style="color: #666; margin: 0;">${companyName}</p>` : ''}
            </div>
            
            <div style="background-color: #fff; padding: 20px; border-radius: 5px; margin-bottom: 20px; border-left: 5px solid ${newStatusColor};">
                <h3 style="margin-top: 0; margin-bottom: 15px;">${ticketTitle || `Ticket #${ticket_id}`}</h3>
                
                <div style="margin-bottom: 20px;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 8px 0; color: #666;">Ticket ID:</td>
                            <td style="padding: 8px 0; font-weight: bold;">${ticket_id}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px 0; color: #666;">Thời gian:</td>
                            <td style="padding: 8px 0;">${formattedDate}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px 0; color: #666;">Người thay đổi:</td>
                            <td style="padding: 8px 0;">${changedBy || 'Hệ thống'}</td>
                        </tr>
                    </table>
                </div>
                
                <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                    <div style="display: inline-block; width: 45%; text-align: center;">
                        <div style="font-size: 14px; color: #666; margin-bottom: 5px;">Trạng thái cũ</div>
                        <div style="font-weight: bold; padding: 8px; background-color: ${oldStatusColor}; color: white; border-radius: 3px;">
                            ${oldStatus || 'N/A'}
                        </div>
                    </div>
                    
                    <div style="display: inline-block; width: 8%; text-align: center; vertical-align: middle;">
                        <div style="font-size: 20px; color: #666;">→</div>
                    </div>
                    
                    <div style="display: inline-block; width: 45%; text-align: center;">
                        <div style="font-size: 14px; color: #666; margin-bottom: 5px;">Trạng thái mới</div>
                        <div style="font-weight: bold; padding: 8px; background-color: ${newStatusColor}; color: white; border-radius: 3px;">
                            ${newStatus || 'N/A'}
                        </div>
                    </div>
                </div>
                
                ${remarks ? `
                <div style="margin-bottom: 20px;">
                    <p style="font-size: 14px; color: #666; margin-bottom: 5px;">Ghi chú:</p>
                    <div style="background-color: #f8f9fa; padding: 10px; border-radius: 3px; border-left: 3px solid #ddd;">
                        ${remarks}
                    </div>
                </div>
                ` : ''}
                
                ${ticketUrl ? `
                <div style="text-align: center; margin-top: 25px;">
                    <a href="${ticketUrl}" 
                       style="background-color: #fb7228; 
                              color: white; 
                              padding: 10px 25px; 
                              text-decoration: none; 
                              border-radius: 5px; 
                              display: inline-block;
                              font-weight: bold;">
                        Xem chi tiết ticket
                    </a>
                </div>
                ` : ''}
            </div>
            
            <p style="color: #999; font-size: 12px; text-align: center; margin-top: 20px;">Email này được gửi tự động, vui lòng không trả lời.</p>
        </div>
    </body>
    </html>`;
};